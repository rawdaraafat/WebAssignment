<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Books Library - Edit Book Details</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="bars.css">
    <link rel="stylesheet" href="books.css">
</head>

<body>
    <div class="bars"></div>
    <script src="bars.js"></script>
    <h2>Edit Book Details</h2>
    <div class="container">
        <div class="main-content book-info">
            <img src="imgs/harry1.jpg" alt="Not Found">
            <form id="editBookForm">
                <label for="title">Book Title:</label>
                <input type="text" id="title" value="">

                <label for="author">Author:</label>
                <input type="text" id="author" value="">

                <label for="category">Category:</label>
                <input type="text" id="category" value="">

                <label for="description">Description:</label>
                <textarea id="description" style="width: 280px"></textarea>

                <label for="pages">Pages:</label>
                <input type="number" id="pages" value="">

                <label for="state">State:</label>
                <input type="text" id="state" value="">

                <button type="submit" id="saveChangesBtn">Save Changes</button>
            </form>
        </div>
    </div>

    <script>
        // Load book data from localStorage when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            const bookId = 'book1'; // ID of the book to be edited
            const storedBooks = JSON.parse(localStorage.getItem('books')) || {};
            const book = storedBooks[bookId];

            if (book) {
                // Populate form fields with book data
                document.getElementById('title').value = book.title || '';
                document.getElementById('author').value = book.author || '';
                document.getElementById('category').value = book.category || '';
                document.getElementById('description').value = book.description || '';
                document.getElementById('pages').value = book.pages || '';
                document.getElementById('state').value = book.state || '';
            } else {
                alert('Book data not found.');
            }
        });

        // Save updated book details to localStorage and redirect back to the main page
        document.getElementById('editBookForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent page reload

            const bookId = 'book1'; // ID of the book being edited
            const storedBooks = JSON.parse(localStorage.getItem('books')) || {};

            // Update book data
            storedBooks[bookId] = {
                title: document.getElementById('title').value,
                author: document.getElementById('author').value,
                category: document.getElementById('category').value,
                description: document.getElementById('description').value,
                pages: document.getElementById('pages').value,
                state: document.getElementById('state').value
            };

            // Save updated data back to localStorage
            localStorage.setItem('books', JSON.stringify(storedBooks));

            // Redirect back to the main page after saving changes
            window.location.href = "book detailed demo.html"; // Replace with the actual URL of the main page
        });
    </script>
</body>
</html>
